<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="box" style="width: 50vh; height: 50vh;"></div>
    <div class="box scale" style=" width: 35vh; height: 35vh;"></div>
    <div class="box scale" style=" width: 30vh; height: 30vh;"></div>
    <div class="box scale" style=" width: 25vh; height: 25vh;"></div>
    <div class="box scale" style=" width: 20vh; height: 20vh;"></div>
    <div class="box rotate" style=" width: 35vh; height: 35vh;"></div>
    <div class="box rotate" style=" width: 30vh; height: 30vh;"></div>
    <div class="box rotate" style=" width: 25vh; height: 25vh;"></div>
    <div class="box rotate" style=" width: 20vh; height: 20vh;"></div>
    <!-- </div> -->
    <!-- <div class="box">
      <!-- <div class="rotate2" style="width: 35vh; height: 35vh;"></div> -->
    <!-- <div class="rotate" style="width: 50px; height: 50px;">
      <div class="box"></div>
    </div> -->
    <!-- </div> -->
    <div class="ball 1" style=" width: 20vh; height: 20vh;"></div>
    <div class="ball 2" style=" width: 20vh; height: 20vh;"></div>
    <div class="ball 3" style=" width: 20vh; height: 20vh;"></div>
    <div class="ball 4" style=" width: 20vh; height: 20vh;"></div>

    <script>
      var start = null;
      function spin(timestamp) {
        var rotate = document.getElementsByClassName("rotate");
        var scale = document.getElementsByClassName("scale");
        var ball = document.getElementsByClassName("ball");
        if (!start) start = timestamp;
        var progress = timestamp - start;
        Array.prototype.forEach.call(rotate, function(element) {
          if (progress < 1800) {
            var newProgress = progress / 25000;
            element.style.transform =
              "translate(-50%, -50%) scale(" +
              (1 - newProgress) +
              ") rotate(" +
              progress / 10 +
              "deg)";
          } else {
            var newProgress = (progress - 3600) / 25000;
            element.style.transform =
              "translate(-50%, -50%) scale(-" +
              (newProgress + 1) +
              ") rotate(" +
              progress / 10 +
              "deg)";
          }
        });
        Array.prototype.forEach.call(scale, function(element) {
          if (progress < 1800) {
            var newProgress = progress / 175;
            element.style.transform =
              "translate(-50%, -50%) scale(" + newProgress * 0.1 + ")";
          } else {
            var newProgress = (progress - 3600) / 175;
            element.style.transform =
              "translate(-50%, -50%) scale(-" + newProgress * -0.1 + ")";
          }
        });
        Array.prototype.forEach.call(ball, function(element) {
          if (progress <= 1800) {
            if (element.className === "ball 1") {
              element.style.transform = "translate(-100%, -100%)";
            }
            //     if (element.className === "ball 2") {
            //       element.style.transform = "translate(0, 0)";
            //     }
            //     if (element.className === "ball 3") {
            //       element.style.transform = "translate(0, -100%)";
            //     }
            //     if (element.className === "ball 4") {
            //       element.style.transform = "translate(-100%, 0)";
            //     }
            var newProgress = progress / 175;
            element.style.transform += " scale(" + newProgress * 0.1 + ")";
          } else {
            if (element.className === "ball 1") {
              element.style.transform = "translate(-100%, -100%)";
            }
            if (element.className === "ball 2") {
              element.style.transform = "translate(0, 0)";
            }
            if (element.className === "ball 3") {
              element.style.transform = "translate(0, -100%)";
            }
            if (element.className === "ball 4") {
              element.style.transform = "translate(-100%, 0)";
            }
            var newProgress = (progress - 3600) / 175;
            element.style.transform += " scale(-" + newProgress * -0.1 + ")";
          }
        });

        if (progress > 3600) {
          start = 0;
        }
        window.requestAnimationFrame(spin);
      }

      window.requestAnimationFrame(spin);
    </script>
  </body>
</html>
